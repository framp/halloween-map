(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}})();const Ve=!1,je=(e,t)=>e===t,qe=Symbol("solid-track"),se={equals:je};let Ae=Oe;const B=1,le=2,ke={owned:null,cleanups:null,context:null,owner:null};var b=null;let ce=null,We=null,w=null,L=null,F=null,ae=0;function ne(e,t){const n=w,s=b,l=e.length===0,o=t===void 0?s:t,r=l?ke:{owned:null,cleanups:null,context:o?o.context:null,owner:o},i=l?e:()=>e(()=>J(()=>Z(r)));b=r,w=null;try{return X(i,!0)}finally{w=n,b=s}}function T(e,t){t=t?Object.assign({},se,t):se;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},s=l=>(typeof l=="function"&&(l=l(n.value)),Ie(n,l));return[xe.bind(n),s]}function U(e,t,n){const s=he(e,t,!1,B);Q(s)}function Y(e,t,n){Ae=Ze;const s=he(e,t,!1,B);s.user=!0,F?F.push(s):Q(s)}function _e(e,t,n){n=n?Object.assign({},se,n):se;const s=he(e,t,!0,0);return s.observers=null,s.observerSlots=null,s.comparator=n.equals||void 0,Q(s),xe.bind(s)}function J(e){if(w===null)return e();const t=w;w=null;try{return e()}finally{w=t}}function Me(e){Y(()=>J(e))}function Te(e){return b===null||(b.cleanups===null?b.cleanups=[e]:b.cleanups.push(e)),e}function xe(){if(this.sources&&this.state)if(this.state===B)Q(this);else{const e=L;L=null,X(()=>ie(this),!1),L=e}if(w){const e=this.observers?this.observers.length:0;w.sources?(w.sources.push(this),w.sourceSlots.push(e)):(w.sources=[this],w.sourceSlots=[e]),this.observers?(this.observers.push(w),this.observerSlots.push(w.sources.length-1)):(this.observers=[w],this.observerSlots=[w.sources.length-1])}return this.value}function Ie(e,t,n){let s=e.value;return(!e.comparator||!e.comparator(s,t))&&(e.value=t,e.observers&&e.observers.length&&X(()=>{for(let l=0;l<e.observers.length;l+=1){const o=e.observers[l],r=ce&&ce.running;r&&ce.disposed.has(o),(r?!o.tState:!o.state)&&(o.pure?L.push(o):F.push(o),o.observers&&De(o)),r||(o.state=B)}if(L.length>1e6)throw L=[],new Error},!1)),t}function Q(e){if(!e.fn)return;Z(e);const t=ae;Je(e,e.value,t)}function Je(e,t,n){let s;const l=b,o=w;w=b=e;try{s=e.fn(t)}catch(r){return e.pure&&(e.state=B,e.owned&&e.owned.forEach(Z),e.owned=null),e.updatedAt=n+1,Ne(r)}finally{w=o,b=l}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?Ie(e,s):e.value=s,e.updatedAt=n)}function he(e,t,n,s=B,l){const o={fn:e,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:b,context:b?b.context:null,pure:n};return b===null||b!==ke&&(b.owned?b.owned.push(o):b.owned=[o]),o}function oe(e){if(e.state===0)return;if(e.state===le)return ie(e);if(e.suspense&&J(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<ae);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===B)Q(e);else if(e.state===le){const s=L;L=null,X(()=>ie(e,t[0]),!1),L=s}}function X(e,t){if(L)return e();let n=!1;t||(L=[]),F?n=!0:F=[],ae++;try{const s=e();return Ye(n),s}catch(s){n||(F=null),L=null,Ne(s)}}function Ye(e){if(L&&(Oe(L),L=null),e)return;const t=F;F=null,t.length&&X(()=>Ae(t),!1)}function Oe(e){for(let t=0;t<e.length;t++)oe(e[t])}function Ze(e){let t,n=0;for(t=0;t<e.length;t++){const s=e[t];s.user?e[n++]=s:oe(s)}for(t=0;t<n;t++)oe(e[t])}function ie(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const s=e.sources[n];if(s.sources){const l=s.state;l===B?s!==t&&(!s.updatedAt||s.updatedAt<ae)&&oe(s):l===le&&ie(s,t)}}}function De(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=le,n.pure?L.push(n):F.push(n),n.observers&&De(n))}}function Z(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),s=e.sourceSlots.pop(),l=n.observers;if(l&&l.length){const o=l.pop(),r=n.observerSlots.pop();s<l.length&&(o.sourceSlots[r]=s,l[s]=o,n.observerSlots[s]=r)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)Z(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)Z(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function Qe(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Ne(e,t=b){throw Qe(e)}const Xe=Symbol("fallback");function be(e){for(let t=0;t<e.length;t++)e[t]()}function ze(e,t,n={}){let s=[],l=[],o=[],r=0,i=t.length>1?[]:null;return Te(()=>be(o)),()=>{let c=e()||[],d=c.length,h,a;return c[qe],J(()=>{let A,x,R,K,G,k,_,$,I;if(d===0)r!==0&&(be(o),o=[],s=[],l=[],r=0,i&&(i=[])),n.fallback&&(s=[Xe],l[0]=ne(j=>(o[0]=j,n.fallback())),r=1);else if(r===0){for(l=new Array(d),a=0;a<d;a++)s[a]=c[a],l[a]=ne(N);r=d}else{for(R=new Array(d),K=new Array(d),i&&(G=new Array(d)),k=0,_=Math.min(r,d);k<_&&s[k]===c[k];k++);for(_=r-1,$=d-1;_>=k&&$>=k&&s[_]===c[$];_--,$--)R[$]=l[_],K[$]=o[_],i&&(G[$]=i[_]);for(A=new Map,x=new Array($+1),a=$;a>=k;a--)I=c[a],h=A.get(I),x[a]=h===void 0?-1:h,A.set(I,a);for(h=k;h<=_;h++)I=s[h],a=A.get(I),a!==void 0&&a!==-1?(R[a]=l[h],K[a]=o[h],i&&(G[a]=i[h]),a=x[a],A.set(I,a)):o[h]();for(a=k;a<d;a++)a in R?(l[a]=R[a],o[a]=K[a],i&&(i[a]=G[a],i[a](a))):l[a]=ne(N);l=l.slice(0,r=d),s=c.slice(0)}return l});function N(A){if(o[a]=A,i){const[x,R]=T(a);return i[a]=R,t(c[a],x)}return t(c[a])}}}function de(e,t){return J(()=>e(t||{}))}function et(e){const t="fallback"in e&&{fallback:()=>e.fallback};return _e(ze(()=>e.each,e.children,t||void 0))}const ee=e=>_e(()=>e());function tt(e,t,n){let s=n.length,l=t.length,o=s,r=0,i=0,c=t[l-1].nextSibling,d=null;for(;r<l||i<o;){if(t[r]===n[i]){r++,i++;continue}for(;t[l-1]===n[o-1];)l--,o--;if(l===r){const h=o<s?i?n[i-1].nextSibling:n[o-i]:c;for(;i<o;)e.insertBefore(n[i++],h)}else if(o===i)for(;r<l;)(!d||!d.has(t[r]))&&t[r].remove(),r++;else if(t[r]===n[o-1]&&n[i]===t[l-1]){const h=t[--l].nextSibling;e.insertBefore(n[i++],t[r++].nextSibling),e.insertBefore(n[--o],h),t[l]=n[o]}else{if(!d){d=new Map;let a=i;for(;a<o;)d.set(n[a],a++)}const h=d.get(t[r]);if(h!=null)if(i<h&&h<o){let a=r,N=1,A;for(;++a<l&&a<o&&!((A=d.get(t[a]))==null||A!==h+N);)N++;if(N>h-i){const x=t[r];for(;i<h;)e.insertBefore(n[i++],x)}else e.replaceChild(n[i++],t[r++])}else r++;else t[r++].remove()}}}const ve="_$DX_DELEGATE";function nt(e,t,n,s={}){let l;return ne(o=>{l=o,t===document?e():D(t,e(),t.firstChild?null:void 0,n)},s.owner),()=>{l(),t.textContent=""}}function V(e,t,n,s){let l;const o=()=>{const i=document.createElement("template");return i.innerHTML=e,i.content.firstChild},r=()=>(l||(l=o())).cloneNode(!0);return r.cloneNode=r,r}function st(e,t=window.document){const n=t[ve]||(t[ve]=new Set);for(let s=0,l=e.length;s<l;s++){const o=e[s];n.has(o)||(n.add(o),t.addEventListener(o,ot))}}function Ee(e,t){t==null?e.removeAttribute("class"):e.className=t}function Ce(e,t,n){e.style.setProperty(t,n)}function lt(e,t,n){return J(()=>e(t,n))}function D(e,t,n,s){if(n!==void 0&&!s&&(s=[]),typeof t!="function")return re(e,t,s,n);U(l=>re(e,t(),l,n),s)}function ot(e){let t=e.target;const n=`$$${e.type}`,s=e.target,l=e.currentTarget,o=c=>Object.defineProperty(e,"target",{configurable:!0,value:c}),r=()=>{const c=t[n];if(c&&!t.disabled){const d=t[`${n}Data`];if(d!==void 0?c.call(t,d,e):c.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&o(t.host),!0},i=()=>{for(;r()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const c=e.composedPath();o(c[0]);for(let d=0;d<c.length-2&&(t=c[d],!!r());d++){if(t._$host){t=t._$host,i();break}if(t.parentNode===l)break}}else i();o(s)}function re(e,t,n,s,l){for(;typeof n=="function";)n=n();if(t===n)return n;const o=typeof t,r=s!==void 0;if(e=r&&n[0]&&n[0].parentNode||e,o==="string"||o==="number"){if(o==="number"&&(t=t.toString(),t===n))return n;if(r){let i=n[0];i&&i.nodeType===3?i.data!==t&&(i.data=t):i=document.createTextNode(t),n=W(e,n,s,i)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||o==="boolean")n=W(e,n,s);else{if(o==="function")return U(()=>{let i=t();for(;typeof i=="function";)i=i();n=re(e,i,n,s)}),()=>n;if(Array.isArray(t)){const i=[],c=n&&Array.isArray(n);if(ge(i,t,n,l))return U(()=>n=re(e,i,n,s,!0)),()=>n;if(i.length===0){if(n=W(e,n,s),r)return n}else c?n.length===0?Se(e,i,s):tt(e,n,i):(n&&W(e),Se(e,i));n=i}else if(t.nodeType){if(Array.isArray(n)){if(r)return n=W(e,n,s,t);W(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function ge(e,t,n,s){let l=!1;for(let o=0,r=t.length;o<r;o++){let i=t[o],c=n&&n[e.length],d;if(!(i==null||i===!0||i===!1))if((d=typeof i)=="object"&&i.nodeType)e.push(i);else if(Array.isArray(i))l=ge(e,i,c)||l;else if(d==="function")if(s){for(;typeof i=="function";)i=i();l=ge(e,Array.isArray(i)?i:[i],Array.isArray(c)?c:[c])||l}else e.push(i),l=!0;else{const h=String(i);c&&c.nodeType===3&&c.data===h?e.push(c):e.push(document.createTextNode(h))}}return l}function Se(e,t,n=null){for(let s=0,l=t.length;s<l;s++)e.insertBefore(t[s],n)}function W(e,t,n,s){if(n===void 0)return e.textContent="";const l=s||document.createTextNode("");if(t.length){let o=!1;for(let r=t.length-1;r>=0;r--){const i=t[r];if(l!==i){const c=i.parentNode===e;!o&&!r?c?e.replaceChild(l,i):e.insertBefore(l,n):c&&i.remove()}else o=!0}}else e.insertBefore(l,n);return[l]}var it=V("<div>");let Le=!1,fe=!1;const ue=[],rt=e=>new Promise(t=>{if(Le){t();return}if(fe){ue.push(t);return}fe=!0;const n=document.createElement("script");n.src=`https://maps.googleapis.com/maps/api/js?key=${e}`,n.async=!0,n.defer=!0,n.onload=()=>{Le=!0,fe=!1,t(),ue.forEach(s=>s()),ue.length=0},document.head.appendChild(n)}),at=e=>{let t,n;return Me(async()=>{t&&(await rt(e.apiKey),n=new google.maps.Map(t,{center:e.center,zoom:e.zoom,mapTypeId:e.mapTypeId||"satellite",disableDefaultUI:!1,zoomControl:!0,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1}),e.onClick&&n.addListener("click",e.onClick),e.onMapReady&&e.onMapReady(n))}),Y(()=>{n&&n.setCenter(e.center)}),Te(()=>{n&&google.maps.event.clearInstanceListeners(n)}),(()=>{var s=it(),l=t;return typeof l=="function"?lt(l,s):t=s,Ce(s,"width","100%"),Ce(s,"height","100%"),s})()};var ct=V("<div class=app><div class=header><h1>Halloween Tracer</h1></div><div>"),ft=V('<div class=controls><div class=path-selector><select><option value disabled>Select a path</option></select><button class=new-btn>New Path</button></div><div class=buttons><button></button><button class=undo-btn title="Remove last point">← Remove Last</button><button class=delete-btn>Delete Path'),ut=V("<option>"),dt=V("<div class=edit-mode-banner>Click to add points • Drag markers to move them"),gt=V("<div class=coordinates-display>Lat: <!>, Lng: "),ht=V("<div class=api-key-prompt><p>Please add your Google Maps API key to .env file:</p><code>VITE_GOOGLE_MAPS_API_KEY=your_api_key_here");const Pe="halloween-paths",$e="halloween-edit-mode",pt={lat:34.89370155214946,lng:32.37164265057329},te=[{id:"shortPath",name:"Short Path",points:[{lat:34.89424701795926,lng:32.372169838981286},{lat:34.89407969685363,lng:32.37270622711389},{lat:34.89443087506647,lng:32.373103125282924},{lat:34.894385761185696,lng:32.37382186840738},{lat:34.89405537437225,lng:32.37386740725867},{lat:34.893821960464344,lng:32.374599444024234},{lat:34.89356394056463,lng:32.375599817418035},{lat:34.89292939535401,lng:32.375908172500026},{lat:34.8923508966462,lng:32.37661901994533},{lat:34.89151054137688,lng:32.376232877447514},{lat:34.89106677064879,lng:32.37575315580791},{lat:34.891004957265835,lng:32.37529449806636},{lat:34.8904463045749,lng:32.37479560718959},{lat:34.89099881885021,lng:32.37369321928447},{lat:34.89319083306189,lng:32.37260896168728}]}],mt=e=>`hsl(${e*137.5%360}, 85%, 55%)`,yt=()=>{const[e,t]=T([]),[n,s]=T(null),[l,o]=T(!1),[r,i]=T(!1),[c,d]=T(null),[h,a]=T(null),[N,A]=T(""),[x,R]=T(void 0),[K,G]=T(null),[k,_]=T(null);let $=new Map,I=new Map,j,z=!1;Me(()=>{const f=localStorage.getItem(Pe);if(f)try{const g=JSON.parse(f);t(g),g.length>0&&s(g[0].id)}catch(g){console.error("Failed to parse saved paths",g),t(te),s(te[0].id)}else t(te),s(te[0].id);const m=localStorage.getItem($e);i(m==="true"),navigator.geolocation&&navigator.geolocation.getCurrentPosition(g=>{a({lat:g.coords.latitude,lng:g.coords.longitude})},g=>{console.error("Error getting location:",g)});const u=async()=>{if(typeof DeviceOrientationEvent.requestPermission=="function")try{await DeviceOrientationEvent.requestPermission()==="granted"&&p()}catch(g){console.error("Error requesting orientation permission:",g)}else p()},p=()=>{const g=v=>{const C=v.webkitCompassHeading||v.alpha;if(C!==null){const M=v.webkitCompassHeading!==void 0?v.webkitCompassHeading:360-C;_(M)}};window.addEventListener("deviceorientationabsolute",g,!0),window.addEventListener("deviceorientation",g)};u(),A("AIzaSyBWH3EJuKpuGx6JSVKdML_tmVTtZc0HtLc");const E=setInterval(()=>{document.querySelectorAll("span").forEach(g=>{var v;if(g.innerText.trim()==="For development purposes only"&&(g.innerText=""),g.innerText.trim()==="This page can't load Google Maps correctly."){const C=(v=g.parentElement)==null?void 0:v.parentElement;C&&C.remove()}})},500),P=g=>{if(g.ctrlKey&&g.key==="e"){g.preventDefault();const v=!r();i(v),localStorage.setItem($e,String(v))}};return window.addEventListener("keydown",P),()=>{window.removeEventListener("keydown",P),clearInterval(E)}}),Y(()=>{const f=e();localStorage.setItem(Pe,JSON.stringify(f))});const H=()=>{const f=n();return f&&e().find(m=>m.id===f)||null};Y(()=>{const f=x();if(!f)return;const m=e();$.forEach(u=>u.setMap(null)),$.clear(),I.forEach(u=>u.forEach(p=>p.setMap(null))),I.clear(),m.forEach((u,p)=>{const y=mt(p),E=u.id===n();if(u.points.length>0){const g=new google.maps.Polyline({path:u.points,strokeColor:y,strokeOpacity:E?1:.6,strokeWeight:E?4:2,map:f});$.set(u.id,g)}const P=[];u.points.forEach((g,v)=>{const C=E&&c()===v,M=new google.maps.Marker({position:g,map:f,label:`${v+1}`,draggable:l()&&E,icon:{path:google.maps.SymbolPath.CIRCLE,scale:13,fillColor:y,fillOpacity:C?1:E?.9:.6,strokeColor:C?"#FFD700":"#ffffff",strokeWeight:C?3:2}});l()&&E&&(M.addListener("click",()=>{z||d(v)}),M.addListener("dragstart",()=>{z=!0,d(v)}),M.addListener("drag",O=>{O.latLng&&G({lat:O.latLng.lat(),lng:O.latLng.lng()})}),M.addListener("dragend",O=>{O.latLng&&Re(u.id,v,{lat:O.latLng.lat(),lng:O.latLng.lng()}),G(null),setTimeout(()=>{z=!1},100)})),P.push(M)}),I.set(u.id,P)})}),Y(()=>{const f=x();if(!f)return;const m=h();if(!m)return;const u=k(),p=u!==null?{path:"M 0,-24 L 12,12 L 0,6 L -12,12 Z",fillColor:"#4285F4",fillOpacity:.9,strokeColor:"#ffffff",strokeWeight:2,scale:1,rotation:u,anchor:new google.maps.Point(0,0)}:{path:google.maps.SymbolPath.CIRCLE,scale:8,fillColor:"#4285F4",fillOpacity:1,strokeColor:"#ffffff",strokeWeight:2};j?(j.setPosition(m),j.setIcon(p)):j=new google.maps.Marker({position:m,map:f,icon:p})});const Re=(f,m,u)=>{t(p=>p.map(y=>{if(y.id===f){const E=[...y.points];return E[m]=u,{...y,points:E}}return y}))},Fe=f=>{const m=H();if(!l()||!m||z||!f.latLng)return;const u={lat:f.latLng.lat(),lng:f.latLng.lng()};t(p=>p.map(y=>y.id===m.id?{...y,points:[...y.points,u]}:y))},Ke=()=>{o(!l())},He=()=>{const f={id:`path-${Date.now()}`,name:`Path ${e().length+1}`,points:[]};t([...e(),f]),s(f.id),o(!0)},Be=()=>{const f=H();if(!f||!confirm(`Delete "${f.name}"?`))return;const u=e().filter(p=>p.id!==f.id);t(u),s(u.length>0?u[0].id:null)},Ge=()=>{const f=H();!f||f.points.length===0||(t(m=>m.map(u=>{if(u.id===f.id){const p=[...u.points];return p.pop(),{...u,points:p}}return u})),d(null))},Ue=f=>{R(f);const m=e();m.length>0&&t([...m])};return(()=>{var f=ct(),m=f.firstChild;m.firstChild;var u=m.nextSibling;return D(m,(()=>{var p=ee(()=>!!r());return()=>p()&&(()=>{var y=ft(),E=y.firstChild,P=E.firstChild;P.firstChild;var g=P.nextSibling,v=E.nextSibling,C=v.firstChild,M=C.nextSibling,O=M.nextSibling;return P.addEventListener("change",S=>s(S.currentTarget.value)),D(P,de(et,{get each(){return e()},children:S=>(()=>{var q=ut();return D(q,()=>S.name),U(()=>q.value=S.id),q})()}),null),g.$$click=He,C.$$click=Ke,D(C,()=>l()?"Done":"Edit"),M.$$click=Ge,O.$$click=Be,U(S=>{var q=e().length===0,pe=l()?"save-btn":"edit-btn",me=!H(),ye=!H()||H().points.length===0,we=!H();return q!==S.e&&(P.disabled=S.e=q),pe!==S.t&&Ee(C,S.t=pe),me!==S.a&&(C.disabled=S.a=me),ye!==S.o&&(M.disabled=S.o=ye),we!==S.i&&(O.disabled=S.i=we),S},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),U(()=>P.value=n()||""),y})()})(),null),D(u,(()=>{var p=ee(()=>!!(l()&&H()));return()=>p()&&dt()})(),null),D(u,(()=>{var p=ee(()=>!!K());return()=>p()&&(()=>{var y=gt(),E=y.firstChild,P=E.nextSibling;return P.nextSibling,D(y,()=>K().lat.toFixed(6),P),D(y,()=>K().lng.toFixed(6),null),y})()})(),null),D(u,(()=>{var p=ee(()=>!!N());return()=>p()?de(at,{get apiKey(){return N()},center:pt,zoom:16,mapTypeId:"satellite",onMapReady:Ue,onClick:Fe}):ht()})(),null),U(()=>Ee(u,`map-container ${l()?"editing":""}`)),f})()};st(["click"]);const wt=document.getElementById("root");nt(()=>de(yt,{}),wt);
